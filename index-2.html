<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01//EN' 'http://www.w3.org/tr/html4/strict.dtd'>
<html>
<head>
<meta name="copyright" content="Copyright (c) 1989-2012 Trend Micro Incorporated, All Rights Reserved" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>tmGrid</title>
<link href="lib/jquery-ui/1.8.20/css/smoothness/jquery-ui-1.8.20.custom.css" rel="stylesheet" media="screen"/>
<!--link href="css/trend-style.css" rel="stylesheet"/>
<link href="css/ui.tmButton.css" rel="stylesheet" media="screen" />

<link href="css/ui.tmDropDownList.css" rel="stylesheet" media="screen" />
<link href="css/ui.tmPopup.css" rel="stylesheet" media="screen" /-->
<link href="css/tmmsgbox.css" rel="stylesheet" media="screen" />
<link href="css/ui.tmGrid.css" rel="stylesheet" media="screen" />
<!--script src="lib/jquery-1.4.4.js"></script-->
<script src="lib/1.4.2/jquery-1.4.2.min.js"></script>
<!--script src="lib/jquery-ui/1.8.5/js/jquery-ui-1.8.5.custom.min.js"></script-->
<script src="lib/jquery-ui/1.8.20/js/jquery-ui-1.8.20.custom.min.js"></script>
<script src="lib/jquery-cookie/jquery.cookie.js"></script>
<script src="lib/dateFormat/dateFormat.js"></script>
<script src="lib/jquery-watch/jquery-watch.js"></script>
<script src="js/tmmsgbox.js"></script>
<script src="js/tmAJAX.js"></script>
<script src="js/ui.tmButton.js"></script>
<script src="js/ui.tmDropDownList.js"></script>
<script src="js/ui.tmPopup.js"></script>
<script src="js/ui.tmGrid.js"></script>
<script>
if (!("console" in window)) {
	window.console = {};
	console.log = function() {};
}
</script>
<style>
.content {
    padding:20px;
}
</style>
</head>
<body>   
<div id="tabs">		
    <div id="tabs-1">
        <div class="content">
            <table id="tmGrid_sortRule"></table>		
        </div>
    </div>
</div>
<!--div class="test">Test</div-->
<script>                
    //var test = $('.test');
   // console.log(test.width());
    /*test.find('thead th').each(function (index, item) {
        var col = $(item);
        //console.log(col);
       // $('body').append(col.width() + ' ');
    });*/
    var data3= [
        {
            'column1_key': 'Row 1 - Column 1 - Value',
            'column2_key': 'Row 1 - Column 2 - Value',
            'column3_key': true,
            'column4_key': 'Row 1 - Column 4 - Value',
            'level_key': 2,
            'otherData': 'Other Data'
        },
        {
            'column1_key': 'Row 2 - Column 1 - Value',
            'column2_key': 'Row 2 - Column 2 - Value',
            'column3_key': false,
            'column4_key': 'Row 2 - Column 4 - Value',
            'level_key': 4,
            'otherData': 'Other Data'
        },
        {
            'column1_key': 'Row 3 - Column 1 - Value',
            'column2_key': 'Row 3 - Column 2 - Value',
            'column3_key': true,
            'column4_key': 'Row 3 - Column 4 - Value',
            'level_key': 1,
            'otherData': 'Other Data'
        },
        {
            'column1_key': 'row 4 - Column 1 - Value',
            'column2_key': 'Row 4 - Column 2 - Value',
            'column3_key': false,
            'column4_key': 'Row 4 - Column 4 - Value',
            'level_key': 3,
            'otherData': 'Other Data'
        },
        {
            'column1_key': 'Row 5 - Column 1 - Value',
            'column2_key': 'Row 5 - Column 2 - Value',
            'column3_key': false,
            'column4_key': 'Row 5 - Column 4 - Value',
            'level_key': 4,
            'otherData': 'Other Data'
        }
    ];
    var columns3= [
        {
            'name': 'Column1',
            'index': 'column1_key',
            'sortable': true,									
            'width': '60px'
        },
        {
            'name': 'Column2',
            'index': 'column2_key',
            //'sortable': false,
            'width': '120px'
        },
        {
            'name': 'Column3',
            'index': 'column3_key',
            //'sortable': true,
            'sortIndex': 'level_key',
            'renderer': function(col, value, rowData){										
                var src, text;
                if(value) {
                    src= 'images/icon_ok_s.png';
                    text= ' data ready';
                }else {
                    src= 'images/icon_error_s.png';
                    text= ' data error';
                }
                col
                    .append($('<img />').attr('src', src))
                    .append(text);
            },									
            'width': '95px'                        
        },
        {
            'name': 'Column4',
            'index': 'column4_key',
           // 'sortable': true,                        
            'width': 30,
            'fidlter': [
                {
                    'name': 'High',
                    'index': 3
                },
                {
                    'name': 'Medium',
                    'index': 2
                }
            ]
        },
        {
            'name': 'Column5',
            'index': 'level_key',
            //'sortable': true,                        
            'width': 30
        },
        {
            'name': 'Column6',
            'index': 'otherData',
           // 'sortable': true,
            'width': 20
        },
    ];
var data = [
	{
		"activeCount" : 0,
		"totalCount" : 4,
		"healthyCount" : 0,
		"groupCount" : 2,
		"ip" : "10.1.111.1",
		"scId" : 0,
		"imageTypes" : [
			"DDA_win7",
			"DDA_win8"
		],
		"sandboxGroups" : [
			{
				"healthy" : false,
				"active" : false,
                "status" : "Available_1_G1",
				"sandboxes" : [
					{
						"name" : "DDA_win7_1_G1_S1",
						"active" : false,
						"healthy" : true
					},
					{
						"name" : "DDA_win8_1_G1_S2",
						"active" : false,
						"healthy" : false
					}
				]
			},
			{
				"healthy" : false,
				"active" : false,
                "status" : "Error_1_G2",
				"sandboxes" : [
					{
						"name" : "DDA_win7_1_G2_S1",
						"active" : false,
						"healthy" : true						
					},
					{
						"name" : "DDA_win8_1_G2_S2",
						"active" : false,
						"healthy" : false						
					}
				]
			}
		]
	},
	{
		"activeCount" : 1,
		"totalCount" : 4,
		"healthyCount" : 2,
		"groupCount" : 2,
		"ip" : "10.1.111.2",
		"scId" : 1,
		"imageTypes" : [
			"DDA_win7",
			"DDA_win8"
		],
		"sandboxGroups" : [
			{
				"healthy" : true,
				"active" : true,
                "status" : "Preparing_2_G1",
				"sandboxes" : [
					{
						"name" : "DDA_win7_2_G1_S1",
						"active" : true,
						"healthy" : true						
					},
					{
						"name" : "DDA_win8_2_G1_S2",
						"active" : true,
						"healthy" : true						
					}
				]
			},
			{
				"healthy" : true,
				"active" : false,
                "status" : "Preparing_2_G2",
				"sandboxes" : [
					{
						"name" : "DDA_win7_2_G2_S1",
						"DDA_win7_2_G2_S1active" : true,
						"healthy" : true						
					},
					{
						"name" : "DDA_win8_2_G2_S2",
						"active" : false,
						"healthy" : true						
					}
				]
			}
		]
	},
    {
		"activeCount" : 1,
		"totalCount" : 4,
		"healthyCount" : 2,
		"groupCount" : 2,
		"ip" : "10.1.111.2",
		"scId" : 1,
		"imageTypes" : [
			"DDA_win7",
			"DDA_win8"
		],
		"sandboxGroups" : [
			{
				"healthy" : true,
				"active" : true,
                "status" : "Preparing_2_G1",
				"sandboxes" : [
					{
						"name" : "DDA_win7_2_G1_S1",
						"active" : true,
						"healthy" : true						
					}
				]
			}
		]
	}
],
    groupCount = 0;
    columns = [
        {
            'name': 'Device IP',
            'index': 'ip',
            'sortable': true
        },
        {
            'name': 'Health',
            'index': 'sandboxGroups[].healthy',
            'sortable': false  
        },
        {
            'name': 'Group',
            'index': 'sandboxGroups[]',
            'sortable': false,
            'renderer': function (col, value, rowData) {
                groupCount += 1;
                col.text('Group ' + groupCount);
            }
        },
        {
            'name': 'Sandbox',
            'index': 'sandboxGroups[].sandboxes[].name',
            'sortable': false
        },
        {
            'name': 'Status',
            'index': 'sandboxGroups[].status',
            'sortable': false
        }
    ],
    columns4 = [
        {
            'name': 'Device IP',
            'index': 'ip',
            'sortable': true,            
            'renderer': function (col, value) {
                col
                    .attr('title', 'customized title')
                    .text('test')
                    .bind('click', function(evt) {
                        console.log('d');
                        evt.stopPropagation();
                    });
            }
        },
        {
            'name': 'Health',
            'index': 'sandboxGroups[].healthy',
            'sortable': false,
            'renderer': function (col, value) {
                col
                    .text('test')
                    .bind('click', function() {
                        console.log('d');
                    });
            }            
        },
        {
            'name': 'Group',
            'index': 'sandboxGroups[]',
            'sortable': false,
            'tooltip': false,
            'renderer': function (col, value) {
                col
                    .text('test')
                    .bind('click', function() {
                        console.log('d');
                    });
            }
            
        },
        {
            'name': 'Sandbox',
            'index': 'sandboxGroups[].sandboxes[].name',
            'sortable': false ,
            'renderer': function (col, value) {
                col
                    .text('test')
                    .bind('click', function() {
                        console.log('d');
                    });
            }
        },
        {
            'name': 'Status',
            'index': 'sandboxGroups[].status',
            'sortable': false,
            'renderer': function (col, value) {
                col
                    .text('test')
                    .bind('click', function() {
                        console.log('d');
                    });
            }
        }
    ],
    data2 = [
        ["AAA1", ["BBB1-1", "BBB1-2"], "CCC1"],
        ["AAA2", "BBB2", "CCC2"]
    ],
   /* data2 = [
        "AAA1",
        ["BBB1-1", "BBB1-2"]
    ],*/
    columns2 = [
        {
            name: 'AA'
        },
        {
            name: 'BB'/*,
            renderer: function (col, value, rowData) {
                console.log(value);
            }*/
        },
        {
            name: 'CC'
        }
    ];   
    
    $('#tmGrid_sortRule').tmGrid({
        dataProvider: data,
        columns: columns,
        /*actionItems: [
            {
                "name": "Add schedule",
                "className": 'button_add',
                'click': function () {
                    var trs = $('#tmGrid_sortRule').tmGrid('getSelectedRows');
                    $(trs).each(
                        function(index, tr) {
                            tr.each(function(ind, item) {
                                console.log($(item).data('data'));
                            });
                        }
                    );
                }
            }
        ],/*
        timeRadngable: true,*/
        noValueSubstitute: '-',
        limit: 10,
        //searkchable: false,
        /*rowSelect: function (evt, trs, value) {
            console.log(evt);
            console.log(trs);
            console.log(value);
        },
        rowUnselect: function (evt, trs, value) {
            console.log(evt);
            console.log(trs);
            console.log(value);
        },
        select: function (evt, trs, values) {
           /* console.log(evt);
            console.log(trs);
            console.log(values);
        },*/
        searchable: false,
        isMulsti: false,
        selectable: false,
        pagination: false,
        
        /*sosrtRule: function(a, b, sortType, colName) {									
            if(colName == 'column1_key') {
                var aval= a[colName].toString().toLowerCase();
                var bval= b[colName].toString().toLowerCase();
                if(sortType == 'desc'){
                    if( aval > bval ) return -1;
                    if( aval < bval ) return 1;
                }else{
                    if( aval < bval ) return -1;
                    if( aval > bval ) return 1;
                }
                return 0;
            }
            return true;
        }*/
    });
$(".test").bind('click', function () {
     $('#tmGrid_sortRule').tmGrid('option', 'selectable', false);
});
</script>
</body>
</html>